## 安装依赖

```
yum -y update
yum -y install lrzsz
yum install gcc
yum install gcc-c++
yum groupinstall "Development tools"
yum install zlib-devel bzip2-devel pcre-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel
yum   install openssl-devel bzip2-devel expat-devel gdbm-devel readline-devel sqlite-devel libffi-devel  -y
yum install -y libffi-devel
yum install pcre pcre-devel pcre-static
yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel
```



## python 3.8

```
https://www.python.org/ftp/python/3.8.8/Python-3.8.8.tar.xz

wget https://www.python.org/ftp/python/3.8.8/Python-3.8.8.tgz

 tar -xzvf Python-3.8.8.tgz -C  /tmp

  cd  /tmp/Python-3.8.8/

  ./configure --prefix=/usr/local

make

make install
make altinstall
ln -s /usr/local/bin/python3.8 /usr/bin/python3
```





## 创建虚拟环境

```
python3 -m venv /www/environment
```


## 进入虚拟环境

```
source activate
```

## 退出虚拟环境

```
deactivate
```



## 升级pip

```
/project/environment/bin/python3 -m pip install --upgrade pip
pip install uwsgi -I --no-cache-dir
```



## requirements

```
aioredis                1.3.1
amqp                    5.0.5
asgiref                 3.3.1
async-timeout           3.0.1
attrs                   20.3.0
autobahn                21.2.1
Automat                 20.2.0
Babel                   2.9.0
bcrypt                  3.2.0
billiard                3.6.3.0
celery                  5.0.5
celery-flower           1.0.1
certifi                 2020.12.5
cffi                    1.14.5
channels                3.0.3
channels-redis          3.2.0
chardet                 4.0.0
click                   7.1.2
click-didyoumean        0.0.3
click-plugins           1.1.1
click-repl              0.1.6
constantly              15.1.0
coreapi                 2.3.3
coreschema              0.0.4
cryptography            3.4.6
daphne                  3.0.1
Django                  3.1.7
django-cors-headers     3.7.0
django-filter           2.4.0
django-redis            4.12.1
djangorestframework     3.12.2
djangorestframework-jwt 1.11.0
dnspython               1.16.0
eventlet                0.30.2
gitdb                   4.0.5
GitPython               3.1.14
greenlet                1.0.0
hiredis                 2.0.0
humanize                3.3.0
hyperlink               21.0.0
idna                    2.10
importlib-metadata      3.7.3
incremental             21.3.0
itypes                  1.2.0
Jinja2                  2.11.3
kombu                   5.0.2
MarkupSafe              1.1.1
msgpack                 1.0.2
paramiko                2.7.2
pip                     21.0.1
prometheus-client       0.8.0
prompt-toolkit          3.0.18
pyasn1                  0.4.8
pyasn1-modules          0.2.8
pycparser               2.20
PyJWT                   1.7.1
PyMySQL                 1.0.2
PyNaCl                  1.4.0
pyOpenSSL               20.0.1
pytz                    2021.1
redis                   3.5.3
requests                2.25.1
service-identity        18.1.0
setuptools              54.1.1
six                     1.15.0
smmap                   3.0.5
sqlparse                0.4.1
Twisted                 21.2.0
twisted-iocpsupport     1.0.1
txaio                   21.2.1
typing-extensions       3.7.4.3
uritemplate             3.0.1
urllib3                 1.26.4
vine                    1.3.0
wcwidth                 0.2.5
zipp                    3.4.1
zope.interface          5.2.0
```

## 安装redis

```
yum install redis  
```

## 安装mysql

```
yum install mysql
```

## 安装nginx

```
yum install nginx
```

## 部署

- 前端   ： nginx 作为静态服务
- 后台web接口  ：uwsgi 多线程启动 ，水平扩展3三台，nginx 作为负载均衡
- websocket ：daphne 在9000端口启动
- 发布引擎：celery 启动
- 定时任务：celery 启动



java -jar xxx.jar --spring.cloud.nacos.server-addr=http://nacos-inter.com:80

http://nacos-inter.yto56.com.cn/nacos/#/login
nacos/ytonacosprd@123
http://nacos-new-inter.yto56.com.cn:8848/nacos
nacos/ytonacosprd@321

